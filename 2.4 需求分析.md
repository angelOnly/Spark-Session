## 2.4 需求分析
### 项目流程及功能实现
1. 对用户访问session进行分析
2. JDBC辅助类封装
3. 按时间比例随机抽取session
4. 获取点击，下单和支付次数排名前10的品类
5. 获取top10品类的点击次数最多的10个session
6. 复杂性能调优全套解决方案
7. 十亿级数据troubleshooting经验总结
8. 数据倾斜全套完美解决方案
9. 模块功能演示

### 需求分析(简化)
1. 按照条件筛选session

    搜索过某些关键词的用户，在某个时间段访问的用户，年龄在某个范围的用户，职业在某个范围的用户，所在某个城市的用户，发起的session。找到对应的这些用户的session。
2. 在统计符合条件的session中，访问时长在 1 ~ 3s,4 ~ 6s,7 ~ 9s,10 ~ 30s,30 ~ 60s,1m ~ 3m,3m ~ 10m,10m ~ 30m范围内的session占比，访问步长在1 ~ 3,4 ~ 6,7 ~ 9,10 ~ 30,30 ~ 60的session占比。
    
    时长是一个session维持的时间，中间点击的次数，就是步长。
    
    筛选出来的session数量大概1000万个，假设计算1 ~ 3s 内符合条件的session数量(100万)，符合条件的占比 100w/1000w = 10%
    
    **功能作用：** 从全局角度看到，符合某些条件的用户群体使用产品的一些习惯。如大多数人在产品上停留多长时间，会在一次使用产品的过程中访问多少个页面。
3. 在符合条件的session中，按照时间比例随机抽取1000个session
    
    随机抽取很简单，按照时间比例就比较复杂。
    
    如一天总共有1000w的session，现在要在这1000w的session中随机抽取1000个session。

    随机需要满足以下要求：如果一天的12:00 ~ 13:00 的session数量是100w，那么这个小时就占1/10，那么这小时中的100w session要抽取 1/10 * 1000 = 100个。
    
    **功能作用：** 让使用者对符合条件的session，按照时间比例均匀的随机采样出1000个session，然后观察每个session具体的点击流/行为。
4. 在符合条件的session中，获取点击，下单，支付数量前10的品类
    
    对每个session可能都会对一些品类的商品点击，下单，支付。现在需要获取这些session的点击，下单，支付排名前10的热门品类，计算出所有这些session对各个品类点击，下单，支付的次数，按照这三个属性获取前10个品类。

    **功能作用：** 符合条件的用户，最感兴趣的商品是什么品类，可以让企业清晰了解到不同层次用户的心理和喜好。
5. 对于前10的品类，分别获取其点击次数排名前10的session。
    
    对于top10的品类，每个都要获取它点击次数排名前10的session。
    
    **功能作用：** 可以看到每个用户群体最感兴趣的品类，各个品类最感兴趣最典型的用户的session的行为。

